<!DOCTYPE html>
<html lang="pl" ng-app>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Kurs AngularJS (eduweb.pl)</title>

        <link href='http://fonts.googleapis.com/css?family=Open+Sans:700,300,600,400&subset=latin,latin-ext' rel='stylesheet' type='text/css'>

        <link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/styles.css" rel="stylesheet">

        <style>
            .info-block{
                color: red;
                font-size: 13px;
            }
        </style>
    </head>
    <body>

        <nav class="navbar navbar-inverse navbar-fixed-top">
            <a class="navbar-brand" href="#">
                <img src="img/angularjs-for-header-only.svg" alt="AngularJS">
            </a>

            <div class="navbar-heading">Walidacja formularza</div>
        </nav>

        <div class="container">
            <div class="row">

                <form name="form" class="form-horizontal" novalidate>

                    <div ng-show="form.$submitted">
                        <div ng-show="form.$valid" class="alert alert-success">
                            <strong>Sukces!</strong> Twoje dane zostały zapisane!
                        </div>

                        <div ng-show="form.$invalid" class="alert alert-warning">
                            <strong>Uwaga!</strong> Popraw błędy formularza!
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="uName" class="col-sm-2 control-label">Imię i nazwisko*</label>

                        <div class="col-sm-4">
                            <input id="uName" class="form-control" type="text" name="uName" ng-model="user.name" required="required">

                            <div ng-show="form.$submitted || form.uName.$touched">
                                <span class="info-block" ng-show="form.uName.$error.required">Musisz podać imię i nazwisko!</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="uEmail" class="col-sm-2 control-label">E-mail*</label>

                        <div class="col-sm-4">
                            <input id="uEmail" class="form-control" type="email" name="uEmail" ng-model="user.email" required="required">

                            <div ng-show="form.$submitted || form.uEmail.$touched">
                                <span ng-show="form.uEmail.$error.required" class="info-block">Musisz podać e-mail!</span>
                                <span ng-show="form.uEmail.$error.email" class="info-block">Podany e-mail jest niepoprawny</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="uPhone" class="col-sm-2 control-label">Telefon</label>

                        <div class="col-sm-4">
                            <input id="uPhone" class="form-control" type="text" name="uPhone" ng-model="user.phone" pattern="\d{3}-\d{3}-\d{3}" placeholder="format: 123-123-123">

                            <div ng-show="form.$submitted || form.uPhone.$touched">
                                <span ng-show="form.uPhone.$error.pattern" class="info-block">Numer telefonu musi być w formacie 123-123-123</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="uEvent" class="col-sm-2 control-label">Wydarzenie*</label>

                        <div class="col-sm-4">
                            <select id="uEvent" class="form-control" name="uEvent" ng-model="user.event" required="required">
                              <option value="">-- wybierz wydarzenie --</option>
                              <option value="angular">Angular - Mistrzowskie aplikacje</option>
                              <option value="js">JavaScript - Od zera do bohatera</option>
                              <option value="html5">HTML5 dla zielonych</option>
                            </select>

                            <div ng-show="form.$submitted || form.uEvent.$touched">
                                <span ng-show="form.uEvent.$error.required" class="info-block">Wybierz wydarzenie na jakie chcesz się zapisać</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="uTickets" class="col-sm-2 control-label">Ilość biletów*</label>

                        <div class="col-sm-3">
                            <input id="uTickets" class="form-control" type="number" name="uTickets" ng-model="user.tickets" required="required" min="1" max="4">

                            <div ng-show="form.$submitted || form.uTickets.$touched">
                                <span ng-show="form.uTickets.$error.required" class="info-block">Podaj ilość biletów, jaką chcesz zarezerwować</span>
                                <span ng-show="form.uTickets.$error.min" class="info-block">Minimalna ilość biletów to 1</span>
                                <span ng-show="form.uTickets.$error.max" class="info-block">Maksymalna ilość biletów to 4</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">

                        <div class="col-sm-8 col-sm-offset-2">
                            <div class="checkbox">
                                <label>
                                  <input id="uConfirm" type="checkbox" name="uConfirm" ng-model="user.confirm" required="">Zgadzam się z regulaminem szkolenia*
                                </label>
                            </div>

                            <div ng-show="form.$submitted || form.uConfirm.$touched">
                                <span ng-show="form.uConfirm.$error.required" class="info-block">Potwierdź regulamin</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-10 col-sm-offset-2">
                        <button class="btn btn-success">Zapisz się na szkolenie</button>
                    </div>

                </form>
            </div>
        </div>

        <script src="js/jquery.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/angular.min.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>

<!--
Aby uzyc walidacji Angulara, w pierwszej kolejnosci musimy w tagu <form> zastosowac dyrektywe novalidate,
w celu wylaczenia domyslnej walidacji przegladarki - patrz linia 35.

Kolejnym waznym atrybutem ktory musimy dodac to tagu <form> jest atrybut name.
W naszym przypadku jest to name="form". Atrybut ten posluzy do odwalania sie do formularza.

Nastepnie w tagu <input> musimy zastosowac dyrektywe ng-model. 
Przykladowo, dla pola name, bedzie to ng-model="user.name"

Teraz nadszedl czas na walidacje samego pola input i wyswietlenie komunikatu.
W tym celu uzyjemy dyrektywy ng-show w tagu zawierajacym text komunikatu.

Przyklad:

<span class="info-block" ng-show="form.uName.$error.required">Musisz podać imię i nazwisko!</span>

ng-show="form..."  -odwolujemy sie do name="form", naszego formularza.
ng-show="form.uName... "  -odwolujemy sie do name="uName", pola input o nazwie uName w formularzu o nazwie form.
$error.required"  - sprawdza czy w tablicy bledow znajduje sie parametr required. Jezeli tak komunikat zostanie wyswietlony


Dokonalismy w ten sposob walidacji pola. Jedyny maly problem jaki mamy w tej chwili, to to ze komunikat wyswietlany jest na stale a my chcemy aby wyswietlil sie w momencie kiedy zaczniemy interakcje z polem.

 
Tym razem razem musimy owinac naszego taga odpowiadajacego za wyswietlenie informacji w diva a nastepnie
musimy uzyc dyrektywy ng-show.
Kod w tagu bedzie wygladal tak - <div ng-show="form.uName.$touched">
Gdzie: 
form.uName - to odwolanie do pola o nazwie uName w formie o nazwie form
$touched - atrybut odpowiadajacy za uaktualnienie pola, czyli w naszym przypadku za wyswietlenie komunikatu.

<div>
  <input id="uName" class="form-control" type="text" name="uName" ng-model="user.name" required="required">
  <div ng-show="form.uName.$touched">
    <span class="info-block" ng-show="form.uName.$error.required">Musisz podać imię i nazwisko!</span>
  </div>
</div>
-->







